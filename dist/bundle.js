(()=>{"use strict";const e=document.querySelector(".name"),t=document.querySelector(".lets-go");let n=10,r=1;const o=(e=r,t=n)=>Math.round(Math.random()*(t-e)+e),c=[function(){const e=o(),t=o();return{num1:e,num2:t,operator:"+",result:e+t}},function(){const e=o(),t=o();return{num1:e,num2:t,operator:"-",result:e-t}},function(){const e=o(),t=o();return{num1:e,num2:t,operator:"*",result:e*t}},function(){const e=o(),t=function(e){let t=[];for(let n=1;n<=e;n++)e%n==0&&t.push(n);return t[o(0,t.length-1)]}(e);return{num1:e,num2:t,operator:"/",result:e/t}}],l=()=>c[o(0,3)](),a=e=>{const t=document.querySelector(".task-form"),n=document.querySelector(".task");n&&(n.innerHTML=`${e.num1} ${e.operator} ${e.num2}`),t.classList.toggle("game__left"),t.classList.toggle("game__right"),setTimeout((()=>{t.classList.toggle("game__right"),t.classList.toggle("game__left")}),500)},s=(e,t)=>{e.forEach((e=>{e.textContent=t}))};function u(e){const t=document.querySelector(".game-over"),n=document.querySelector(".result-page"),r=document.querySelector(".count").textContent,o=JSON.parse(localStorage.getItem("mode"));n.classList.toggle("d-none"),r>e[0][o]&&(e[0][o]=r,t.textContent="New Record",localStorage.setItem("data",JSON.stringify(e)))}const i=document.querySelector(".leaders__list"),d=JSON.parse(localStorage.getItem("mode"))??"practice",m=document.querySelectorAll(".mode"),S=(e,t)=>{m.forEach((n=>{n.checked&&(((e,t)=>{e.sort((function(e,n){return e[t]>n[t]?-1:n[t]>e[t]?1:0}))})(e,n.id),((e,t,n)=>{i.innerHTML="",e.forEach((e=>{i.innerHTML+=`<li class=${n.name===e.name&&"active-user"}>\n      <div class="leaders__item">\n          <p class="name">${e.name}</p>\n          <p class="score">${e[t]}</p>\n      </div>\n  </li>`}))})(e,n.id,t))}))},g=JSON.parse(localStorage.getItem("mode")),f=document.querySelector(".timer");let y=120;const v=JSON.parse(localStorage.getItem("data"))??[];(function(n){e&&(e.value=n[0]?.name||"",t.disabled=!e.value,e?.addEventListener("input",(()=>{t.disabled=!e.value}))),t?.addEventListener("click",(function(){!function(t){const n={name:e.value,timeAtack:0,practice:0};t.forEach(((r,o)=>{r.name===e.value&&(n.timeAtack=r.timeAtack,n.practice=r.practice,t.splice(o,1))})),t.unshift(n),localStorage.setItem("data",JSON.stringify(t))}(n),document.querySelectorAll(".mode").forEach((e=>{e.checked&&localStorage.setItem("mode",JSON.stringify(e.id))}))}))})(v),function(){const e=document.querySelector(".rules-btn"),t=document.querySelector(".rules"),n=document.querySelector(".rules__inner");e?.addEventListener("click",(()=>{t.classList.remove("d-none")})),t?.addEventListener("click",(e=>{-1===e.path.indexOf(n)&&t.classList.add("d-none")}))}(),-1!=window.location.href.indexOf("/game.html")&&(function(e){const t=document.querySelector(".user-name"),n=document.querySelector(".raiting"),r=JSON.parse(localStorage.getItem("mode"));t&&(t.textContent=e[0].name,n.textContent="Last record: "+e[0][r])}(v),function(e){const t=document.querySelector(".stop-btn"),n=document.querySelector(".result");t?.addEventListener("click",(()=>{n.disabled=!0,u(e)}))}(v),function(){const e=document.querySelector(".result"),t=document.querySelector(".task-form");let o=0,c=l(),u=0,i=0;e?.focus(),a(c),t?.addEventListener("submit",(()=>{""!==e.value&&(Number(e.value)===c.result?(u++,o+=1):(i++,o-=1),function(e){const t=document.querySelector(".true-false"),n=document.querySelector(".count");e?(t.textContent="+1",t.classList.remove("error")):(t.textContent="-1",t.classList.add("error"),n.classList.add("error-example")),t.classList.add("true-false--active"),setTimeout((()=>{t.classList.remove("true-false--active"),n.classList.remove("error-example")}),900)}(Number(e.value)===c.result),((e,t,n)=>{const r=document.querySelectorAll(".count"),o=document.querySelectorAll(".correct"),c=document.querySelectorAll(".incorrect");s(r,e),s(o,"correct: "+t),s(c,"Incorrect: "+n)})(o,u,i),(e=>{const t=document.querySelector(".level");e>=n&&(r=n,n+=10,t.textContent="Level: "+n/10,String(e).length)})(o),e.value="",c=l(),a(c))}))}(),function(e){if("timeAtack"===g){let t=setInterval((()=>{y-=1,function(){let e=String(y%60).padStart(2,"0"),t=String((y-e)/60).padStart(2,"0");y<10&&f.classList.toggle("warning"),f.textContent=`${t}:${e}`}(),y<=0&&(clearInterval(t),u(e))}),1e3)}else f.classList.add("d-none")}(v)),-1!=window.location.href.indexOf("/leaders.html")&&function(e){const t=document.querySelector(".mode__inner"),n=e[0];document.querySelector(`#${d}`).checked=!0,S(e,n),t.addEventListener("change",(()=>{S(e,n)}))}(v)})();